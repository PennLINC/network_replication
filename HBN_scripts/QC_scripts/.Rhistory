library(dplyr)
library(tidyverse)
library(magrittr)
library(reshape)
library(reshape2)
library(MASS)
library(stargazer)
library(cifti)
library(ggplot2)
library(ggpubr)
demographics <- read.table("/cbica/projects/network_replication/input/HBN/sample_selection/participants.tsv")
demographics
demographics <- read.table("/cbica/projects/network_replication/input/HBN/sample_selection/participants.tsv", header=T)
demographics
demographics <- demographics %>% rename("participant_id", "sub")
demographics <- demographics %>% rename(participant_id, sub)
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
demographics <- demographics rename(participant_id=sub)
demographics <- demographics %>% rename(participant_id=sub)
demographics <- demographics %>% rename("participant_id"="sub")
demographics <- rename(demographics, "participant_id"="sub")
rename(demographics, "participant_id"="sub")
rename(demographics,participant_id=sub)
rename(demographics,sub=participant_id)
library(dplyr)
demographics <- read.table("/cbica/projects/network_replication/input/HBN/sample_selection/participants.tsv", header=T)
rename(demographics,sub=participant_id)
rename(demographics,sub = participant_id)
demographics %>% rename(sub = participant_id)
names(demographics)
demographics %>% rename(po = participant_id)
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp/qc_files'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp/qc_files'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp/qc_files'))
length(list.files('/cbica/projects/network_replication/input/HBN/HBN_xcp/qc_files'))
collated_HBN.xcp <- read.csv("/cbica/projects/network_replication/input/HBN/sample_selection/HBN_xcp_qc.csv")
collated_HBN.xcp <- read.csv("/cbica/projects/network_replication/input/HBN/sample_selection/HBN_xcp_qc.csv")
names(collated_HBN.xcp)
collated_HBN.xcp
collated_HBN.xcp
collated_HBN.xcp
collated_HBN.xcp$sub <- paste0("sub-", collated_HBN.xcp$sub)
# T1 QA
T1_QA <- read.csv("/cbica/projects/network_replication/input/NKI/sample_selection/EulerNumber_VisualQC_3sites.csv")
T1_QA <- read.csv("/cbica/projects/network_replication/input/NKI/sample_selection/EulerNumber_VisualQC_3sites.csv")
T1_QA$rbc_id <- gsub("sub-", "", T1_QA$rbc_id)
T1_QA$session <- gsub("ses-", "", T1_QA$session)
names(T1_QA)[which(names(T1_QA) == "rbc_id")] <- "sub"
names(T1_QA)[which(names(T1_QA) == "session")] <- "ses"
names(T1_QA)[which(names(T1_QA) == "manual_qc")] <- "t1_qc"
participants
participants
demographics <- read.table("/cbica/projects/network_replication/input/HBN/sample_selection/participants.tsv", header=T)
demographics %>% rename(sub = participant_id)
demographics %>% rename( participant_id=sub)
rename(demographics, participant_id=sub)
collated_HBN.xcp$sub
collated_HBN.xcp <- read.csv("/cbica/projects/network_replication/input/HBN/sample_selection/HBN_xcp_qc.csv")
collated_HBN.xcp$sub <- paste0("sub-", collated_HBN.xcp$sub)
# T1 QA
T1_QA <- read.csv("/cbica/projects/network_replication/input/NKI/sample_selection/EulerNumber_VisualQC_3sites.csv")
T1_QA$rbc_id <- gsub("sub-", "", T1_QA$rbc_id)
T1_QA$session <- gsub("ses-", "", T1_QA$session)
names(T1_QA)[which(names(T1_QA) == "rbc_id")] <- "sub"
names(T1_QA)[which(names(T1_QA) == "session")] <- "ses"
names(T1_QA)[which(names(T1_QA) == "manual_qc")] <- "t1_qc"
T1_QA
T1_QA <- read.csv("/cbica/projects/network_replication/input/NKI/sample_selection/EulerNumber_VisualQC_3sites.csv")
T1_QA$rbc_id <- gsub("sub-", "", T1_QA$rbc_id)
T1_QA <- read.csv("/cbica/projects/network_replication/input/NKI/sample_selection/EulerNumber_VisualQC_3sites.csv")
T1_QA$rbc_id <- gsub("sub-", "", T1_QA$rbc_id)
T1_QA$session <- gsub("ses-", "", T1_QA$session)
names(T1_QA)[which(names(T1_QA) == "rbc_id")] <- "sub"
names(T1_QA)[which(names(T1_QA) == "session")] <- "ses"
names(T1_QA)[which(names(T1_QA) == "manual_qc")] <- "t1_qc"
T1_QA
T1_QA <- read.csv("/cbica/projects/network_replication/input/NKI/sample_selection/EulerNumber_VisualQC_3sites.csv")
T1_QA$rbc_id <- gsub("sub-", "", T1_QA$rbc_id)
T1_QA
T1_QA <- read.csv("/cbica/projects/network_replication/input/NKI/sample_selection/EulerNumber_VisualQC_3sites.csv")
T1_QA$session <- gsub("ses-", "", T1_QA$session)
names(T1_QA)[which(names(T1_QA) == "rbc_id")] <- "sub"
names(T1_QA)[which(names(T1_QA) == "session")] <- "ses"
names(T1_QA)[which(names(T1_QA) == "manual_qc")] <- "t1_qc"
T1_QA
participants
participants <- demographics$participant_id
participants
demographics <- (demographics, sub = participant_id)
demographics <- rename(demographics, sub = participant_id)
class(demographics)
demographics <- rename(demographics, sub = participant_id)
names(demographics)[1] <- "sub"
demographics <- read.table("/cbica/projects/network_replication/input/HBN/sample_selection/participants.tsv", header=T)
demographics <- rename(demographics, sub = participant_id)
names(demographics)[1] <- "sub"
collated_HBN.xcp <- read.csv("/cbica/projects/network_replication/input/HBN/sample_selection/HBN_xcp_qc.csv")
collated_HBN.xcp$sub <- paste0("sub-", collated_HBN.xcp$sub)
# T1 QA
T1_QA <- read.csv("/cbica/projects/network_replication/input/NKI/sample_selection/EulerNumber_VisualQC_3sites.csv")
T1_QA$session <- gsub("ses-", "", T1_QA$session)
names(T1_QA)[which(names(T1_QA) == "rbc_id")] <- "sub"
names(T1_QA)[which(names(T1_QA) == "session")] <- "ses"
names(T1_QA)[which(names(T1_QA) == "manual_qc")] <- "t1_qc"
T1_QA <- merge(T1_QA, demographics, by ="sub")
T1_QA
# T1 QA
T1_QA <- read.csv("/cbica/projects/network_replication/input/NKI/sample_selection/EulerNumber_VisualQC_3sites.csv")
T1_QA
which(T1_QA$rbc_id %in% demographics$sub)
which(demographics$sub %>% T1_QA$rbc_id)
which(demographics$sub %in% T1_QA$rbc_id)
collated_HBN.xcp
for (i in c(1:nrow(collated_HBN.xcp))) {
if (str_detect(collated_HBN.xcp$dir[i], "VARIANT")) {
collated_HBN.xcp$dir[i] <- collated_HBN.xcp$run[i]
collated_HBN.xcp$run[i] <- collated_HBN.xcp$space[i]
collated_HBN.xcp$space[i] <- collated_HBN.xcp$den[i]
collated_HBN.xcp$den[i] <- collated_HBN.xcp$meanFD[i]
collated_HBN.xcp$meanFD[i] <- collated_HBN.xcp$relMeansRMSMotion[i]
#collated_HBN.xcp[i, 1] <- paste0(collated_HBN.xcp[i, 1], "VARIANT")
}
}
collated_HBN.xcp
# fix variants' formatting
for (i in c(1:nrow(collated_HBN.xcp))) {
if (str_detect(collated_HBN.xcp$acq[i], "VARIANT")) {
collated_HBN.xcp$acq[i] <- collated_HBN.xcp$soace[i]
collated_HBN.xcp$space[i] <- collated_HBN.xcp$den[i]
collated_HBN.xcp$den[i] <- collated_HBN.xcp$meanFD[i]
collated_HBN.xcp$meanFD[i] <- collated_HBN.xcp$relMeansRMSMotion[i]
collated_HBN.xcp$relMeansRMSMotion[i] <- collated_HBN.xcp$relMaxRMSMotion[i]
#collated_HBN.xcp[i, 1] <- paste0(collated_HBN.xcp[i, 1], "VARIANT")
}
}
for (i in c(1:nrow(collated_HBN.xcp))) {
if (str_detect(collated_HBN.xcp$acq[i], "VARIANT")) {
collated_HBN.xcp$acq[i] <- collated_HBN.xcp$space[i]
collated_HBN.xcp$space[i] <- collated_HBN.xcp$den[i]
collated_HBN.xcp$den[i] <- collated_HBN.xcp$meanFD[i]
collated_HBN.xcp$meanFD[i] <- collated_HBN.xcp$relMeansRMSMotion[i]
collated_HBN.xcp$relMeansRMSMotion[i] <- collated_HBN.xcp$relMaxRMSMotion[i]
#collated_HBN.xcp[i, 1] <- paste0(collated_HBN.xcp[i, 1], "VARIANT")
}
}
collated_HBN.xcp
toDelete <- seq(2, nrow(collated_HBN.xcp), 2)
collated_HBN.xcp <- collated_HBN.xcp[-c(toDelete),]
collated_HBN.xcp
collated_HBN.xcp <- read.csv("/cbica/projects/network_replication/input/HBN/sample_selection/HBN_xcp_qc.csv")
collated_HBN.xcp$sub <- paste0("sub-", collated_HBN.xcp$sub)
collated_HBN.xcp
